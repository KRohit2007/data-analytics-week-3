R version 4.5.1 (2025-06-13 ucrt) -- "Great Square Root"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Workspace loaded from ~/.RData]

> load("~/.RData")
> library(DBI)
Error in library(DBI) : there is no package called ‘DBI’

> install.packages("DBI")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/DBI_1.2.3.zip'
Content type 'application/zip' length 943945 bytes (921 KB)
downloaded 921 KB

package ‘DBI’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> install.packages("RMariaDB")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
also installing the dependencies ‘bit’, ‘generics’, ‘timechange’, ‘bit64’, ‘blob’, ‘lubridate’, ‘plogr’
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/bit_4.6.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/generics_0.1.4.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/timechange_0.3.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/bit64_4.6.0-1.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/blob_1.2.4.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/lubridate_1.9.4.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/plogr_0.2.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/RMariaDB_1.3.4.zip'
package ‘bit’ successfully unpacked and MD5 sums checked
package ‘generics’ successfully unpacked and MD5 sums checked
package ‘timechange’ successfully unpacked and MD5 sums checked
package ‘bit64’ successfully unpacked and MD5 sums checked
package ‘blob’ successfully unpacked and MD5 sums checked
package ‘lubridate’ successfully unpacked and MD5 sums checked
package ‘plogr’ successfully unpacked and MD5 sums checked
package ‘RMariaDB’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> library(DBI)
> library(RMariaDB)  # or library(RMySQL)
> 
> con <- dbConnect(RMariaDB::MariaDB(),
+                  user = "root",
+                  password = "Rohitk2007",
+                  dbname = "earthquakes_db",
+                  host = "localhost",
+                  port = 3306)
> 
> dbListTables(con)  # Should list your tables, e.g., "significant_earthquakes"
[1] "earthquake_events_per_month" "risk_zones"                  "significant_earthquakes"    
> 
> quake_data <- dbGetQuery(con, "SELECT id, time, latitude, longitude, depth, mag FROM significant_earthquakes")
> 
> # Check data
> head(quake_data)
            id                time   latitude   longitude    depth      mag
1 ak000126digo 2000-01-23 08:42:28  57.569900 -149.091100 27.80000 5.500000
2 ak0001kedehd 2000-02-03 10:24:58  65.008700 -154.239000 10.00000 5.600000
3 ak0002nyhqq3 2000-02-27 02:22:15  60.202500 -145.921600 18.10000 5.000000
4 ak0002nyhqq4 2000-02-27 02:22:15  -3.764475   27.723041 52.12336 5.302078
5 ak0002nyhqq5 2000-02-27 02:22:15 -10.878709    1.795687 41.36555 5.170291
6 ak0002t9i8pq 2000-03-01 23:05:14  60.189600 -145.900500 10.00000 5.400000
> 
> # Remove rows with missing lat/lon or time
> quake_data <- quake_data %>%
+     filter(!is.na(latitude) & !is.na(longitude) & !is.na(time))
Error in quake_data %>% filter(!is.na(latitude) & !is.na(longitude) &  : 
  could not find function "%>%"

> install.packages("dplyr")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
also installing the dependencies ‘withr’, ‘tidyselect’
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/withr_3.0.2.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/tidyselect_1.2.1.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/dplyr_1.1.4.zip'
package ‘withr’ successfully unpacked and MD5 sums checked
package ‘tidyselect’ successfully unpacked and MD5 sums checked
package ‘dplyr’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> library(dplyr)

Attaching package: ‘dplyr’

The following objects are masked from ‘package:stats’:

    filter, lag

The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union
> 
> # Remove rows with missing lat/lon or time
> quake_data <- quake_data %>%
+     filter(!is.na(latitude) & !is.na(longitude) & !is.na(time))
> 
> # Convert time to POSIXct
> quake_data$time <- as.POSIXct(quake_data$time, format="%Y-%m-%d %H:%M:%S", tz="UTC")
> 
> coords <- quake_data %>% select(longitude, latitude) %>% as.matrix()
> 
> # Run DBSCAN
> spatial_clusters <- dbscan(coords, eps = 0.5, minPts = 5)  # eps = 0.5° (~50km)
Error in dbscan(coords, eps = 0.5, minPts = 5) : 
  could not find function "dbscan"

> install.packages("dbscan")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
also installing the dependency ‘Rcpp’
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/Rcpp_1.1.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/dbscan_1.2.3.zip'
package ‘Rcpp’ successfully unpacked and MD5 sums checked
package ‘dbscan’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> library(dbscan)

Attaching package: ‘dbscan’

The following object is masked from ‘package:stats’:

    as.dendrogram
> 
> coords <- quake_data %>% select(longitude, latitude) %>% as.matrix()
> 
> spatial_clusters <- dbscan(coords, eps = 0.5, minPts = 5)
> 
> coords <- quake_data %>% select(longitude, latitude) %>% as.matrix()
> 
> # Run DBSCAN
> spatial_clusters <- dbscan(coords, eps = 0.5, minPts = 5)  # eps = 0.5° (~50km)
> 
> quake_data$spatial_cluster <- spatial_clusters$cluster
> 
> # Check clusters
> table(quake_data$spatial_cluster)

   0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18 
2983 4853    6   16    6   12   83  139    9   11    8   14   27 1740   16   15    9  230   15 
  19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37 
  27    9   23   12   23   38    8   10    5    6    5 2207  310   21  383  296  724  350  491 
  38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56 
   7   86  762  145   13    6   53   19    6   71   50   65   31   16   79   48   54   38   13 
  57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75 
   8  168   51   25    5    6   15   11   27  168    6    8  142    8   32   29    7  209   14 
  76   77   78   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94 
  73   17    6    9   28   15   22   11    9   10    7    6    6   19   31   13    7   54   10 
  95   96   97   98   99  100  101  102  103  104  105  106  107  108  109  110  111  112  113 
   9    6    9   56    5   21    7   15   12    5   10   10   32    7    6   13   11   17   10 
 114  115  116  117  118  119  120  121  122  123  124  125  126  127  128  129  130  131  132 
   6   54   51   21   54    9   16  262    5    8   16   19   14    8   81   77    5   61    5 
 133  134  135  136  137  138  139  140  141  142  143  144  145  146  147  148  149  150  151 
  19    6   53   10    6   14    6   10    5    6  189    8   12   59   11    8   36   10    9 
 152  153  154  155  156  157  158  159  160  161  162  163  164  165  166  167  168  169  170 
   5   15   22    9    9    9   12   14   13   14   34   15   15    7    5    6    9    6    6 
 171  172  173  174  175  176  177  178  179  180  181  182  183  184  185  186  187  188  189 
   7   22   10   24   10    5   14   18    8   24   14   24   81   12    5   11    5    5   35 
 190  191  192  193  194  195  196  197  198  199  200  201  202  203  204  205  206  207  208 
 110   30    6    7    7   12    7    9    8    7    5   12   51   18    9    9   16   14    9 
 209  210  211  212  213  214  215  216  217  218  219  220  221  222  223  224  225  226  227 
   6   10    7   16    6   24    8   14   12   13    5    8   10    5   19    6    9    7    7 
 228  229  230  231  232  233  234  235  236  237  238  239  240  241  242  243  244  245  246 
   6    7   13    6    9    7    8   16    8   14    5    6    9    7   13   10    7    9    5 
 247  248  249  250  251  252  253  254  255  256  257  258  259  260  261  262  263  264  265 
  14    7    7    6    9    3   13   11   16   11    5    5   10    5   17    5    4   11    5 
 266  267  268  269  270  271  272  273  274  275  276  277  278  279  280  281  282  283  284 
 112    4    7    5    7   19    5    9   10   12   10   10    5   12    5   12    7   14    8 
 285  286  287  288  289  290  291  292  293  294  295  296  297  298  299  300  301  302  303 
   7   12    8    9    9    5    8    8    7    7    5    6    6    5   18    6    5   11    5 
 304  305  306  307  308  309  310  311  312  313  314  315  316  317  318  319  320  321  322 
   7   10    7    5   17   16   10    9   10    5   21    8    5    9    7    5    7    7   13 
 323  324  325  326  327  328  329  330  331  332  333  334  335  336  337  338  339  340  341 
   5    5    8    5   11   10    7    6   11    5    9   10   16   19    6   11    8   10    9 
 342  343  344  345  346  347  348  349  350  351  352  353  354  355  356  357  358  359  360 
   5    5   14    5    5    7    5    6   32    6    7    7   20    5    5    7    8    7    5 
 361  362  363  364  365  366  367  368  369  370  371  372  373  374  375  376  377  378  379 
   8   10    9    5    7    6    6    5    9    5    5    8    7    5    8    6   18   66    5 
 380  381  382  383  384  385  386  387  388  389  390  391  392  393  394 
   5    5    9    5    8    6   14    5    5    5    6    5    5   17    5 
> 
> ggplot(quake_data, aes(x = longitude, y = latitude, color = as.factor(spatial_cluster))) +
+     geom_point(alpha = 0.6) +
+     theme_minimal() +
+     labs(color = "Cluster", title = "Spatial Clustering of Earthquakes")
Error in ggplot(quake_data, aes(x = longitude, y = latitude, color = as.factor(spatial_cluster))) : 
  could not find function "ggplot"

> install.packages("ggplot2")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
also installing the dependencies ‘farver’, ‘labeling’, ‘RColorBrewer’, ‘viridisLite’, ‘gtable’, ‘isoband’, ‘S7’, ‘scales’
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/farver_2.1.2.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/labeling_0.4.3.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/RColorBrewer_1.1-3.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/viridisLite_0.4.2.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/gtable_0.3.6.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/isoband_0.2.7.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/S7_0.2.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/scales_1.4.0.zip'
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/ggplot2_4.0.0.zip'
package ‘farver’ successfully unpacked and MD5 sums checked
package ‘labeling’ successfully unpacked and MD5 sums checked
package ‘RColorBrewer’ successfully unpacked and MD5 sums checked
package ‘viridisLite’ successfully unpacked and MD5 sums checked
package ‘gtable’ successfully unpacked and MD5 sums checked
package ‘isoband’ successfully unpacked and MD5 sums checked
package ‘S7’ successfully unpacked and MD5 sums checked
package ‘scales’ successfully unpacked and MD5 sums checked
package ‘ggplot2’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> library(ggplot2)
> 
> ggplot(quake_data, aes(x = longitude, y = latitude, color = as.factor(spatial_cluster))) +
+     geom_point(alpha = 0.6) +
+     theme_minimal() +
+     labs(color = "Cluster", title = "Spatial Clustering of Earthquakes")
> datatable(quake_data, options = list(pageLength = 10), caption = "Earthquake Events")
Error in datatable(quake_data, options = list(pageLength = 10), caption = "Earthquake Events") : 
  could not find function "datatable"

> ggplot(quake_data, aes(x = mag)) +
+     geom_histogram(binwidth = 0.2, fill = "skyblue", color = "black") +
+     theme_minimal() +
+     labs(title = "Magnitude Distribution of Earthquakes", x = "Magnitude", y = "Count")
> 
> library(ggplot2)
> library(gridExtra)
Error in library(gridExtra) : there is no package called ‘gridExtra’

> install.packages("gridExtra")
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/91731/AppData/Local/R/win-library/4.5’
(as ‘lib’ is unspecified)
trying URL 'https://cran.rstudio.com/bin/windows/contrib/4.5/gridExtra_2.3.zip'
Content type 'application/zip' length 1109668 bytes (1.1 MB)
downloaded 1.1 MB

package ‘gridExtra’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\91731\AppData\Local\Temp\RtmpAvsu3k\downloaded_packages
> 
> library(gridExtra)

Attaching package: ‘gridExtra’

The following object is masked from ‘package:dplyr’:

    combine
> 
> library(ggplot2)
> library(gridExtra)
> 
> p1 <- ggplot(quake_data, aes(x = mag)) +
+     geom_histogram(binwidth = 0.2, fill = "skyblue", color = "black") +
+     theme_minimal() +
+     labs(title = "Magnitude Distribution")
> 
> p2 <- ggplot(quake_data, aes(x = depth)) +
+     geom_histogram(binwidth = 5, fill = "salmon", color = "black") +
+     theme_minimal() +
+     labs(title = "Depth Distribution")
> 
> p3 <- ggplot(quake_data, aes(x = time)) +
+     geom_histogram(binwidth = 30*24*3600, fill = "lightgreen", color = "black") +
+     theme_minimal() +
+     labs(title = "Earthquake Frequency Over Time")
> 
> p4 <- ggplot(quake_data, aes(x = time, y = mag)) +
+     geom_point(alpha = 0.5, color = "purple") +
+     theme_minimal() +
+     labs(title = "Magnitude Over Time")
> 
> grid.arrange(p1, p2, p3, p4, ncol = 2)
> 
